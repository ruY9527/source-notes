# 大量数据渲染优化

1. 时间切片：
   * 由于JS的Event Loop机制，当 JS 引擎的执行栈中的事件以及所有微任务事件全部执行完后，才会触发渲染线程对页面进行渲染，此时数据量过大会阻塞页面渲染
   * 通过 requestAnimationFrame 我们可以**由浏览器来决定回调函数的执行时机**,并将大量数据的多次渲染分为多个片段，在每个片段中解析定量数据交给浏览器渲染，第一时间将页面展现给用户
   * 通过DocumentFragment：我们得知`DocumentFragments`是DOM节点，但并不是DOM树的一部分，可以认为是存在内存中的，所以将子元素插入到文档片段时不会引起页面回流。将dom在文档中存储，最后append到跟容器中
   * 缺点：
     * 相当于替用户触发懒加载，DOM是逐次渲染的，消耗时间会长一点
     * 以为不是一次渲染，滚动条滚动到底部时，看不到未加载完毕的数据
     * dom结构复杂时（事件监听/子节点...）,同样会影响性能，需要考虑虚拟列表
2. 虚拟列表：
   * 与懒加载不同，虚拟滚动需要一次性获取所有数据，但是只显示屏幕可见范围内的数据
   * 前置条件：
     * 一行的高度
     * 屏幕范围内能显示的行数
     * 列表在页面中距离网页顶部的位置
     * 滚动条高度
   * 
3. 参考链接：
   * https://juejin.cn/post/6844903982742110216

